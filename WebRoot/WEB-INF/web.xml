<?xml version="1.0" encoding="GB2312"?>
<web-app version="2.4"
         xmlns="http://java.sun.com/xml/ns/j2ee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" >
  <display-name>SinoEAM</display-name> 
  <description>山西移动资产实物管理系统</description>
     <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:SinoConfig/EntryConfig.xml</param-value>
    </context-param>
    <context-param>
        <param-name>startConfigListener</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>listenFrequency</param-name>
        <param-value>60</param-value>
    </context-param>
  <filter>
    <filter-name>SetCharacterEncoding</filter-name>
    <filter-class>com.sino.base.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
      <param-name>encoding</param-name>
      <param-value>GBK</param-value>
    </init-param>
  </filter>
    <filter>
        <filter-name>ssotokenfilter</filter-name>
        <filter-class>com.sino.sso.filter.SSOTokenFilter</filter-class>
        <init-param>
            <param-name>authenticateURL</param-name>
            <param-value>http://portal.sxmcc.com.cn/amserver/UI/Login</param-value>
        </init-param>
    </filter>
  <filter>
    <filter-name>WebAccessFilter</filter-name><!--通用资源权限验证器过滤器，但目前仅限于各种URL资源。其他系统也可用，但必须符合下面的标准-->
    <filter-class>com.sino.framework.security.filter.WebAccessFilter</filter-class>
    <init-param>
      <param-name>userDTO</param-name><!--SinoAMS系统使用的用户对象。用户类可热插拔，但必须继承com.sino.framework.dto.BaseUserDTO类-->
      <param-value>com.sino.ams.system.user.dto.SfUserDTO</param-value>
    </init-param>
    <init-param>
      <param-name>loginName</param-name><!--SinoAMS系统使用的用户对象登录帐号的表单域名，SfUserDTO属性名-->
      <param-value>loginName</param-value>
    </init-param>
    <init-param>
      <param-name>loginPwd</param-name><!--SinoAMS系统使用的用户对象登录密码的表单域名，SfUserDTO属性名-->
      <param-value>password</param-value>
    </init-param>
	 <init-param>
      <param-name>modulePath</param-name><!--SinoAMS系统使用的模型路径-->
      <param-value>D:\module</param-value>
    </init-param>
    <init-param>
      <param-name>loginDAO</param-name><!--SinoAMS系统使用的用户有效性验证器，本类只验证用户是否存在，不验证权限。本类必须继承com.sino.framework.security.dao.BaseLoginDAO。-->
      <param-value>com.sino.ams.log.dao.UserLoginDAO</param-value>
    </init-param>
     <init-param>
      <param-name>loginSuccessURL</param-name><!--SinoAMS系统使用的用户登录成功后的导向页面-->
      <param-value>/servlet/com.sino.sinoflow.framework.security.servlet.LoginFrmServlet</param-value>
    </init-param>
    <init-param>
      <param-name>authenticator</param-name><!--SinoAMS系统使用的用户资源访问权限验证器，本类验证用户对指定资源是否权限。本类必须继承com.sino.framework.security.dao.PrivilegeAuthenticator。-->
      <param-value>com.sino.sinoflow.framework.security.dao.SFPriviAuthenticator</param-value>
    </init-param>
    <init-param>
      <param-name>loginUrl</param-name><!--SinoAMS系统的登录页面-->
      <param-value>/login.jsp</param-value>
    </init-param>
    <init-param>
      <param-name>loginServlet</param-name><!--SinoAMS系统的登录页面提交的Servlet，不允许更改。可通用-->
      <param-value>/servlet/com.sino.framework.security.servlet.UserLoginServlet</param-value>
    </init-param>
    <init-param>
      <param-name>logOutServlet</param-name><!--SinoAMS系统中处理退出登录请求的Servlet，不允许更改。可通用-->
      <param-value>/servlet/com.sino.framework.security.servlet.UserLogOutServlet</param-value>
    </init-param>
    <init-param>
      <param-name>sessionServlet</param-name><!--SinoAMS系统中会话数据续传的Servlet，不允许更改。可通用-->
      <param-value>/servlet/com.sino.framework.security.servlet.SessionSetServlet</param-value>
    </init-param>
    <init-param>
      <param-name>timeOutUrl</param-name><!--SinoAMS系统用户会话过期时导向的页面-->
      <param-value>/timeOutPage.jsp</param-value>
    </init-param>
    <init-param>
      <param-name>noPriviledgeURL</param-name><!--SinoAMS系统用户对指定资源无权限时导向的页面-->
      <param-value>/noPriviPage.jsp</param-value>
    </init-param>
    <init-param>
      <param-name>exceptServlets</param-name><!--SinoAMS系统不需要验证的Servlet资源-->
      <param-value>OACountServlet;SSOForward;OAInboxServlet;OABoxServlet;GetShareDic;GetOPE;GetNLE;GetLNE;GetCountry;GetManufacturer;GetBTS;GetCEX;GetConstructDic;GetContent;GetContentCEX;GetContentLNE;GetContentNLE;GetContentOPE;GISQueryServlet;GISServlet;GetPDAConfig;logOutServlet;SessionSetServlet;PortalLoginServlet;FirstLoginServlet;GetGroups;GetProjs;GetRoles;FlowSubmit;FetchProject;ValidateUser;GetServerTime;GetWorkOrders;GetItemCategory;GetItemInfo;GetETSInfo;GetFAInfo;GetGroupUsers;GetLocationInfo;CreateWorkOrder;SignWorkOrder;WorkOrderSubmit;AssignWorkOrders;GetAssignGroups;SMSServlet;GetSpareOrders;GetSpareInfo;QueryAssets;SubmitSpareOrder;CreateSpareOrder;GetSpareLoc;QueryUpdate;BillDownload;BillCreate;GetChkTask;GetArchiveUser;GetSpecialityDept;GetTaskServlet;GetProject;GetImplementUser</param-value>
    </init-param>
    <init-param>
      <param-name>exceptPackages</param-name><!--SinoAMS系统不需要验证的package资源-->
      <param-value>GISQueryServlet;GISServlet;SMSTestServlet;logOutServlet;SessionSetServlet;PortalLoginServlet;FirstLoginServlet;GetGroups;GetProjs;GetRoles;FlowSubmit;ValidateUser;GetServerTime;GetWorkOrders;GetItemCategory;GetItemInfo;GetETSInfo;GetFAInfo;GetGroupUsers;GetLocationInfo;CreateWorkOrder;SignWorkOrder;WorkOrderSubmit;AssignWorkOrders;GetAssignGroups;SMSServlet;GetSpareOrders;GetSpareInfo;QueryAssets;SubmitSpareOrder;CreateSpareOrder;GetSpareLoc;QueryUpdate;BillDownload;BillCreate;GetChkTask;GetArchiveUser;GetSpecialityDept;GetTaskServlet</param-value>
    </init-param>
    <init-param>
      <param-name>exceptJSPs</param-name><!--SinoAMS系统不需要验证的jsp资源-->
      <param-value>testPortal.jsp;portalLogin.jsp;oa.jsp;index.jsp;gisInfoStatic.jsp</param-value>
    </init-param>
    <init-param>
      <param-name>exceptions</param-name><!--SinoAMS系统不需要验证的其它各种后缀名指定的资源，例如各种静态文件-->
      <param-value>htm;html;css;js;jpg;gif;ico;htc;faces</param-value>
    </init-param>
  </filter>
  <filter>
    <filter-name>LogFilter</filter-name>
    <filter-class>com.sino.ams.system.log.filter.SfUserLogFilter</filter-class>
    <init-param>
      <param-name>startLog</param-name>
      <param-value>true</param-value>
    </init-param>
  </filter>
  <filter-mapping>
    <filter-name>SetCharacterEncoding</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>ssotokenfilter</filter-name>
    <url-pattern>/servlet/*</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>WebAccessFilter</filter-name>
    <url-pattern>/servlet/*</url-pattern>
  </filter-mapping>
    <filter-mapping>
    <filter-name>WebAccessFilter</filter-name>
    <url-pattern>*.jsp</url-pattern>
  </filter-mapping>
  <filter-mapping>
    <filter-name>LogFilter</filter-name>
    <url-pattern>/servlet/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
  </filter-mapping>
      <filter-mapping>
    <filter-name>LogFilter</filter-name>
    <url-pattern>*.jsp</url-pattern>
  </filter-mapping>
     <listener>
        <listener-class>com.sino.foundation.web.listener.SinoAppContextListener</listener-class>
    </listener> 
    <!--<listener>-->
        <!--<listener-class>com.sun.faces.config.ConfigureListener</listener-class>-->
    <!--</listener>-->
  <!--<listener>-->
    <!--<listener-class>com.sino.analyse.importData.web.listener.ContextListener</listener-class>-->
  <!--</listener>-->
  <!--
  <listener>
       <listener-class>com.sino.base.web.listener.SessionListener</listener-class>
   </listener>-->
    
  <listener>
    <listener-class>com.sino.framework.security.servlet.SessionHandle</listener-class>
  </listener>
  
  <servlet>
    <servlet-name>SinoInitServlet</servlet-name>
    <servlet-class>com.sino.base.web.init.SinoInitServlet</servlet-class>
    <init-param>
      <param-name>loadConnPools</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>loadMessages</param-name><!--是否加载消息提示信息-->
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>startSMSService</param-name><!--发送短消息-->
      <param-value>false</param-value>
    </init-param>
    <init-param>
      <param-name>startWorkorderDefineService</param-name><!--巡检工单-->
      <param-value>false</param-value>
    </init-param>
    <init-param>
      <param-name>startListener</param-name>
      <param-value>false</param-value>
    </init-param>
    <init-param>
      <param-name>listenFrequency</param-name>
      <param-value>60</param-value>
    </init-param>
    <init-param>
      <param-name>startRecycleServer</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>checkUnique</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>checkEmpty</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>checkLength</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>checkNumber</param-name>
      <param-value>true</param-value>
    </init-param>
    <init-param>
      <param-name>systemName</param-name>
      <param-value>资产管理系统</param-value>
    </init-param>
    <init-param>
      <param-name>sysAdminRole</param-name><!--系统内置的管理角色，系统管理员拥有无限权限，每个省根据具体情况设置，但必须与数据库表SF_ROLE中记录一致-->
      <param-value>系统管理员</param-value>
    </init-param>
    <init-param>
      <param-name>cityAdminRole</param-name><!--系统内置管理角色，地市管理员拥有本地市系统维护权限，每个省根据具体情况设置，但必须与数据库表SF_ROLE中记录一致-->
      <param-value>地市管理员</param-value>
    </init-param>
    <init-param>
      <param-name>provAssetsMgr</param-name><!--管理全省资产，每个省根据具体情况设置，但必须与数据库表SF_ROLE中记录一致-->
      <param-value>全省资产管理员</param-value>
    </init-param>
    <init-param>
      <param-name>compAssetsMgr</param-name><!--管理相应公司资产，每个省根据具体情况设置，但必须与数据库表SF_ROLE中记录一致-->
      <param-value>公司资产管理员</param-value>
    </init-param>
    <init-param>
      <param-name>deptAssetsMgr</param-name><!--管理部门资产，每个省根据具体情况设置，但必须与数据库表SF_ROLE中记录一致-->
      <param-value>部门资产管理员</param-value>
    </init-param>
    <init-param>
      <param-name>mtlAssetsMgr</param-name><!--根据资产类别设置的管理员，每个省根据具体情况设置，但必须与数据库表SF_ROLE中记录一致-->
      <param-value>专业资产管理员</param-value>
    </init-param>
    <init-param>
      <param-name>provinceOrgId</param-name><!--省公司OU组织ID，根据系统实施的实际省份修改-->
      <param-value>82</param-value>
    </init-param>
    <init-param>
      <param-name>proCompanyCode</param-name><!--省公司OU公司代码，根据系统实施的实际省份修改-->
      <param-value>4110</param-value>
    </init-param>
    <init-param>
      <param-name>proCompanyName</param-name><!--省公司OU组织ID，根据系统实施的实际省份修改-->
      <param-value>OU_山西省本部</param-value>
    </init-param>
    <init-param>
      <param-name>provinceCode</param-name><!--省公司OU组织ID，根据系统实施的实际省份修改-->
      <param-value>41</param-value>
    </init-param>
      <init-param>
        <param-name>tdProvinceOrgId</param-name><!--省公司OU组织ID，根据系统实施的实际省份修改-->
        <param-value>101</param-value>
      </init-param>
      <init-param>
        <param-name>tdProCompanyCode</param-name><!--省公司OU公司代码，根据系统实施的实际省份修改-->
        <param-value>8110</param-value>
      </init-param>
      <init-param>
        <param-name>tdProCompanyName</param-name><!--省公司OU组织ID，根据系统实施的实际省份修改-->
        <param-value>OU_山西省本部</param-value>
      </init-param>
      <init-param>
        <param-name>tdProvinceCode</param-name><!--省公司OU组织ID，根据系统实施的实际省份修改-->
        <param-value>81</param-value>
      </init-param>
    <init-param>
      <param-name>loginImage</param-name><!--登陆页面背景图片，根据系统实施的实际省份修改-->
      <param-value>/images/index-1-xian.jpg</param-value>
    </init-param>
    <init-param>
      <param-name>topImage</param-name><!--登陆后框架页面背景图片，根据系统实施的实际省份修改-->
      <param-value>/images/top-1-xian.jpg</param-value>
    </init-param>

    <init-param>
      <param-name>faCategory1</param-name><!--资产类别1值集名称，根据系统实施的实际省份修改-->
      <param-value>CMCC_FA_CAT_1</param-value>
    </init-param>
    <init-param>
      <param-name>faCategory2</param-name><!--资产类别2值集名称，根据系统实施的实际省份修改-->
      <param-value>CMCC_FA_CAT_2</param-value>
    </init-param>
    <init-param>
      <param-name>faCategory3</param-name><!--资产类别3值集名称，根据系统实施的实际省份修改-->
      <param-value>CMCC_FA_CAT_3</param-value>
    </init-param>
    <init-param>
      <param-name>companySegment</param-name><!--帐户公司段，根据系统实施的实际省份修改-->
      <param-value>SXMC_COA_CO</param-value>
    </init-param>
    <init-param>
      <param-name>costCenterSegment</param-name><!--帐户成本中心段，根据系统实施的实际省份修改-->
      <param-value>SXMC_COA_CC</param-value>
    </init-param>
    <init-param>
      <param-name>accountSegment</param-name><!--帐户会计科目段，根据系统实施的实际省份修改-->
      <param-value>SXMC_COA_AC</param-value>
    </init-param>
    <init-param>
      <param-name>bandSegment</param-name><!--帐户品牌段，根据系统实施的实际省份修改-->
      <param-value>SXMC_COA_SB</param-value>
    </init-param>
    <init-param>
      <param-name>projectSegment</param-name><!--帐户项目段，根据系统实施的实际省份修改-->
      <param-value>SXMC_COA_PJ</param-value>
    </init-param>
    <init-param>
      <param-name>internalComeSegment</param-name><!--帐户内部往来段，根据系统实施的实际省份修改-->
      <param-value>SXMC_COA_IC</param-value>
    </init-param>
    <init-param>
      <param-name>spareSegment</param-name><!--帐户备用段，根据系统实施的实际省份修改-->
      <param-value>SXMC_COA_SP</param-value>
    </init-param>
    <!--<init-param>-->
      <!--<param-name>initRunner</param-name>&lt;!&ndash;根据上述参数动态运行的类，该类必须继承com.sino.base.web.init.SinoInitialRunner&ndash;&gt;-->
      <!--<param-value>com.sino.ams.init.AMSInitialRunner</param-value>-->
    <!--</init-param>-->
    <load-on-startup>1</load-on-startup>
  </servlet>
   <!--DWR2.0-->
   <!--<servlet>
    <servlet-name>dwr-invoker</servlet-name>
    <servlet-class>org.directwebremoting.servlet.DwrServlet</servlet-class>
    <init-param>
      <param-name>debug</param-name>
      <param-value>true</param-value>
    </init-param>
	<init-param>
    <param-name>crossDomainSessionSecurity</param-name>
    <param-value>false</param-value>
   </init-param>
   <load-on-startup>2</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>dwr-invoker</servlet-name>
    <url-pattern>/dwr/*</url-pattern>
  </servlet-mapping>-->
    <servlet>
        <servlet-name>MessageProcess</servlet-name>
        <servlet-class>com.sino.framework.servlet.MessageProcessServlet</servlet-class>
    </servlet>
    <servlet>
        <servlet-name>action</servlet-name>
        <servlet-class>org.apache.struts.action.ActionServlet</servlet-class>
        <init-param>
            <param-name>config</param-name>
            <param-value>
                /WEB-INF/classes/config/struts/struts-config-rds.xml
            </param-value>
        </init-param>
        <load-on-startup>2</load-on-startup>
    </servlet>
    
   
    <!--added by yuli on 2009-05-15-->
    <servlet-mapping>
        <servlet-name>action</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>MessageProcess</servlet-name>
        <url-pattern>/message/MessageProcess</url-pattern>
    </servlet-mapping>
  <session-config>
    <session-timeout>120</session-timeout>
  </session-config>
  <welcome-file-list>
    <welcome-file>login.jsp</welcome-file>
  </welcome-file-list>
</web-app>